<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Nutrition Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÉ‚Äç‚ôÄÔ∏è Workout Nutrition Calculator</h1>
            <p>Daily macros + workout fueling recommendations</p>
            <div style="margin-top: 10px; font-size: 0.9em; opacity: 0.8;">
                Version 4.0 - Refactored Architecture
            </div>
        </div>

        <div class="main-content">
            <div class="section">
                <h2>üîó Load Workout from Intervals.icu</h2>
                
                <div class="form-group">
                    <label for="apiKey">API Key</label>
                    <input type="password" id="apiKey" placeholder="Enter your API key" value="5b7vz3ozlxd42dqx0udbrq7e2">
                </div>
                
                <div class="form-group">
                    <label for="workoutDate">Workout Date</label>
                    <input type="date" id="workoutDate">
                </div>
                
                <button class="button" onclick="workoutManager.loadWorkoutData()">Load Workout</button>
                <button class="button secondary" onclick="ui.toggleManualEntry()">Manual Entry</button>
                
                <div id="workoutStatus"></div>
                
                <div class="race-override" id="raceOverride">
                    <h3>üèÅ Race Detected!</h3>
                    <p>We found a race in your schedule. Please verify the details and adjust if needed:</p>
                    <div id="raceWorkouts"></div>
                    <div class="button-group">
                        <button class="button" onclick="workoutManager.applyRaceOverride()">Calculate Race Nutrition</button>
                        <button class="button secondary" onclick="workoutManager.cancelRaceOverride()">Cancel</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üë§ Your Profile</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="bodyWeight">Body Weight (lbs)</label>
                        <input type="number" id="bodyWeight" min="100" max="250" value="192">
                    </div>
                    <div class="form-group">
                        <label for="goals">Current Goals</label>
                        <select id="goals">
                            <option value="weight-loss">Weight Loss</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="performance">Performance Focus</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="section" id="manualSection" style="display: none;">
                <h2>üìä Manual Workout Entry</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="workoutType">Workout Type</label>
                        <select id="workoutType">
                            <option value="none">Rest Day</option>
                            <option value="easy">Easy/Recovery</option>
                            <option value="endurance">Endurance (Zone 2)</option>
                            <option value="tempo">Tempo (Zone 3)</option>
                            <option value="threshold">Threshold (Zone 4)</option>
                            <option value="intervals">Intervals (Zone 5)</option>
                            <option value="strength">Strength Training</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="duration">Duration (minutes)</label>
                        <input type="number" id="duration" min="0" max="480" value="60">
                    </div>
                </div>

                <button class="button" onclick="nutritionCalculator.calculate()">Calculate My Nutrition Plan</button>
            </div>

            <div class="results" id="results">
                <div class="section">
                    <h2>üéØ Today's Nutrition Plan</h2>
                    
                    <div class="nutrition-card">
                        <h3>Daily Macro Targets</h3>
                        <div class="macro-grid">
                            <div class="macro-item">
                                <div class="macro-value" id="totalCalories">0</div>
                                <div class="macro-label">Calories</div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-value" id="totalProtein">0g</div>
                                <div class="macro-label">Protein</div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-value" id="totalCarbs">0g</div>
                                <div class="macro-label">Carbs</div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-value" id="totalFat">0g</div>
                                <div class="macro-label">Fat</div>
                            </div>
                        </div>
                    </div>

                    <div class="nutrition-card" id="fuelingCard">
                        <h3>Workout Fueling Strategy</h3>
                        <div class="macro-grid">
                            <div class="macro-item">
                                <div class="macro-value" id="preWorkout">0g</div>
                                <div class="macro-label">Pre-Workout Carbs</div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-value" id="duringWorkout">0g</div>
                                <div class="macro-label">During (per hour)</div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-value" id="postWorkout">0g</div>
                                <div class="macro-label">Post-Workout Carbs</div>
                            </div>
                            <div class="macro-item">
                                <div class="macro-value" id="fluidIntake">0ml</div>
                                <div class="macro-label">Fluids (per hour)</div>
                            </div>
                        </div>
                        <div class="fueling-notes" id="fuelingNotes">
                            <h4>Fueling Notes</h4>
                            <ul id="fuelingTips">
                                <li>No specific fueling needed for this workout</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load JS modules -->
    <script src="js/api.js"></script>
    <script src="js/nutrition.js"></script>
    <script src="js/workouts.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
